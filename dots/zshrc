# Add custom zsh functions folder
fpath=(~/dotfiles/zfunctions $fpath)

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Disable SHARE_HISTORY enabled by prezto history module
unsetopt SHARE_HISTORY

# aliases
alias l='ls'
alias la='ls -a'
alias ll='ls -l'
alias lla='ls -la'
alias lm='lla | "$PAGER"'

alias -g L='|less'

# Register and set custom tsv prompt theme automatically
# selecting theme color 'light' or 'dark' based on
# terminal background color luminance if available
prompt_themes+='tsv'
if (( $(term_luminance) > 30 )); then
  prompt tsv light
else
  prompt tsv dark
fi

# Launch gpg-agent
[ -f ~/.gpg-agent-info ] && source ~/.gpg-agent-info
if [ -S "${GPG_AGENT_INFO%%:*}" ]; then
  export GPG_AGENT_INFO
else
  eval $( gpg-agent --daemon --write-env-file ~/.gpg-agent-info )
fi
